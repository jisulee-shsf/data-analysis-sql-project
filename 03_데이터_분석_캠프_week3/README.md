####
## ğŸ“Œ ë°ì´í„° ë¶„ì„ ìº í”„ week3
#### â–º [01_funnel_analysis_01_221021 / 02_funnel_analysis_02_221021]
- í¼ë„ ë¶„ì„(Funnel Analysis) ãƒ» UTM(Urchin Tracking Module) ãƒ» ì„¸ì…˜(Session) ê´€ë ¨ ì´ë¡  í•™ìŠµ
- SQLì„ í™œìš©í•´ ì„¸ì…˜ë³„ í¼ë„ ì „í™˜ìœ¨(Conversion Rate) ê³„ì‚°ì„ í†µí•´ í¼ë„ ë¶„ì„ ì‹¤ìŠµ
##
#### í¼ë„ ë¶„ì„(Funnel Analysis)
- ì‚¬ìš©ìê°€ ì„¤ê³„ëœ ì‚¬ìš©ì ê²½í—˜ ë£¨íŠ¸ì— ìœ ì…ëœ í›„, ìµœì¢… ëª©ì ì§€ê¹Œì§€ ì˜ ë„ì°©í–ˆëŠ”ì§€ ì£¼ìš” ë‹¨ê³„ë³„ë¡œ ë‚˜ëˆ„ì–´ ì‚´í´ë³´ëŠ” ì‚¬ìš©ì ë¶„ì„ ë°©ë²•
- ê° ë‹¨ê³„ë³„ë¡œ ì‚¬ìš©ì ìˆ˜ê°€ ì¤„ì–´ë“œëŠ” ê¹”ë•Œê¸°(Funnel) ëª¨ì–‘ì„ ë³¸ë–  í¼ë„ ë¶„ì„ì´ë¼ ì§€ì¹­
- ì‚¬ìš©ìê°€ ê° ë‹¨ê³„ë¥¼ ë„˜ì–´ê°€ëŠ” ê²ƒì„ ì „í™˜(Conversion), ê·¸ ë¹„ìœ¨ì„ ì „í™˜ìœ¨(Conversion Rate)ì´ë¼ ì§€ì¹­
#### UTM(Urchin Tracking Module) 
- ì˜¨ë¼ì¸ ë§ˆì¼€íŒ… ìº í˜ì¸ì„ íš¨ê³¼ì ìœ¼ë¡œ ì¶”ì í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ìœ ì… ê²½ë¡œë¥¼ í‘œì‹œí•´ì£¼ëŠ” 5ê°€ì§€ì˜ URL ë§¤ê°œ ë³€ìˆ˜
- utm_source / utm_medium / utm_campaign / utm_term / utm_content êµ¬ì„±
#### ì„¸ì…˜(Session)
- ì‚¬ìš©ìê°€ ì§€ì •ëœ ê¸°ê°„ ë‚´ì— ì‚¬ì´íŠ¸ì—ì„œ ì·¨í•œ í˜ì´ì§€ ì¡°íšŒ / ì´ë²¤íŠ¸ / ì „ììƒê±°ë˜ ë“±ì˜ í–‰ë™ ì§‘í•©
- ì‚¬ìš©ìì˜ í–‰ë™ì´ ì–´ë– í•œ ì‚¬ìœ ë¡œ ì§„í–‰ëœ ê²ƒì¸ì§€ íŠ¹ì •í•˜ê¸° ìœ„í•´ ì—°ì†ëœ í™œë™ì„ ì„¸ì…˜ ë‹¨ìœ„ë¡œ ë¬¶ì–´ ë¶„ì„ ì§„í–‰
<img src="https://user-images.githubusercontent.com/109773795/198859313-4ce1f4da-fce8-455c-9bc7-11baec7a812a.png" width="750" height="230"/>
<img src="https://user-images.githubusercontent.com/109773795/198901487-8f8fae97-57a2-4b67-942a-09764900777a.png" width="750" height="360"/>

#### Reference 
- [datarian ë°ì´í„° ë¶„ì„ ë¸”ë¡œê·¸](https://www.datarian.io/blog)
- [Google Analytics - ë§ì¶¤ URLì„ ì‚¬ìš©í•´ ìº í˜ì¸ ë°ì´í„° ìˆ˜ì§‘í•˜ê¸°](https://support.google.com/analytics/answer/1033863?hl=ko#zippy=%2C%EC%9D%B4-%EB%8F%84%EC%9B%80%EB%A7%90%EC%97%90-%EB%82%98%EC%99%80-%EC%9E%88%EB%8A%94-%EB%82%B4%EC%9A%A9%EC%9D%80-%EB%8B%A4%EC%9D%8C%EA%B3%BC-%EA%B0%99%EC%8A%B5%EB%8B%88%EB%8B%A4)
- [Google Analytics - ìœ ë‹ˆë²„ì„¤ ì• ë„ë¦¬í‹±ìŠ¤ì—ì„œ ì›¹ ì„¸ì…˜ì„ ì •ì˜í•˜ëŠ” ë°©ë²•](https://support.google.com/analytics/answer/2731565?hl=ko#zippy=%2C%EC%9D%B4-%EB%8F%84%EC%9B%80%EB%A7%90%EC%97%90-%EB%82%98%EC%99%80-%EC%9E%88%EB%8A%94-%EB%82%B4%EC%9A%A9%EC%9D%80-%EB%8B%A4%EC%9D%8C%EA%B3%BC-%EA%B0%99%EC%8A%B5%EB%8B%88%EB%8B%A4)
##
#### Funnel Analysis - view â†’ scroll
``` SQL
SELECT COUNT(DISTINCT page_view.user_id, page_view.session_id) AS view_session_cnt
     , COUNT(DISTINCT page_scroll.user_id, page_scroll.session_id) AS scroll_session_cnt
     , COUNT(DISTINCT page_scroll.user_id, page_scroll.session_id) 
     / COUNT(DISTINCT page_view.user_id, page_view.session_id) AS view_scroll_rate
FROM page_view
LEFT JOIN page_scroll ON page_view.user_id = page_scroll.user_id
                     AND page_view.session_id = page_scroll.session_id
                     AND page_view.event_timestamp <= page_scroll.event_timestamp;
```
|view_session_cnt|scroll_session_cnt|view_scroll_rate|
|:---:|:---:|:---:|
|1135|309|0.2722|
- ì‚¬ì´íŠ¸ í˜ì´ì§€ë¥¼ ë³¸ ì„¸ì…˜ ìˆ˜ëŠ” 1135ì´ë©°, í˜ì´ì§€ë¥¼ ë³¸ ë’¤ ìŠ¤í¬ë¡¤ì„ í•œ ì„¸ì…˜ ìˆ˜ëŠ” 309ì…ë‹ˆë‹¤.
- í˜ì´ì§€ë¥¼ ë³¸ ë’¤ ìŠ¤í¬ë¡¤í•œ ì „í™˜ìœ¨ì€ ì•½ 27%ì…ë‹ˆë‹¤.
#### Funnel Analysis - view â†’ scroll â†’ click
``` SQL
SELECT COUNT(DISTINCT page_view.user_id, page_view.session_id) AS view_session_cnt
     , COUNT(DISTINCT page_scroll.user_id, page_scroll.session_id) AS scroll_session_cnt
     , COUNT(DISTINCT page_click.user_id, page_click.session_id) AS click_session_cnt
     , COUNT(DISTINCT page_scroll.user_id, page_scroll.session_id)
     / COUNT(DISTINCT page_view.user_id, page_view.session_id) AS view_scroll_rate
     , COUNT(DISTINCT page_click.user_id, page_click.session_id) 
     / COUNT(DISTINCT page_scroll.user_id, page_scroll.session_idon_id) AS scroll_click_rate
     , COUNT(DISTINCT page_click.user_id, page_click.session_id) 
     / COUNT(DISTINCT page_view.user_id, page_view.session_id) AS view_click_rate
FROM page_view
LEFT JOIN page_scroll ON page_view.user_id = page_scroll.user_id
                     AND page_view.session_id = page_scroll.session_id
                     AND page_view.event_timestamp <= page_scroll.event_timestamp
LEFT JOIN page_click ON page_scroll.user_pseudo_id = page_click.user_pseudo_id
		    AND page_scroll.session_id = page_click.session_id
		    AND page_scroll.event_timestamp <= page_click.event_timestamp;
```
|view_session_cnt|scroll_session_cnt|click_session_cnt|view_scroll_rate|scroll_click_rate|view_click_rate|
|:---:|:---:|:---:|:---:|:---:|:---:|
|1135|309|38|0.2722|0.123|0.0335|
- ì‚¬ì´íŠ¸ í˜ì´ì§€ë¥¼ ë³¸ ì„¸ì…˜ ìˆ˜ëŠ” 1135, í˜ì´ì§€ë¥¼ ë³¸ ë’¤ ìŠ¤í¬ë¡¤ì„ í•œ ì„¸ì…˜ ìˆ˜ëŠ” 309, ìŠ¤í¬ë¡¤í•œ ë’¤ ì‹ ì²­ ë²„íŠ¼ì„ í´ë¦­í•œ ì„¸ì…˜ ìˆ˜ëŠ” 38ì…ë‹ˆë‹¤.
- í˜ì´ì§€ë¥¼ ë³¸ ë’¤ ìŠ¤í¬ë¡¤í•œ ì „í™˜ìœ¨ì€ ì•½ 27%, ìŠ¤í¬ë¡¤í•œ ë’¤ í´ë¦­í•œ ì „í™˜ìœ¨ì€ ì•½ 12%, í˜ì´ì§€ë¥¼ ë³¸ ë’¤ í´ë¦­ê¹Œì§€ ë„ë‹¬í•œ ìµœì¢… ì „í™˜ìœ¨ì€ ì•½ 3%ì…ë‹ˆë‹¤.
####
